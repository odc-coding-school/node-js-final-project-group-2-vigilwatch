<!-- This is the dashboard page -->

<!-- This is the dashboard page -->
<%- include('layouts/header')%>
<link rel="stylesheet" href="/css/dashboard.css">
<title>Dashboard</title>
</head>
<body>
<header>
  <%- include ('layouts/navbar')%>
  <%- include ('layouts/sidebar')%>
</header>

<!-- Dashboard.ejs -->
<div class="dashboard-container">
    <div class="profile-section">
        <img src="<%= userProfile %>" alt="User Profile">
    </div>

    <h2 style="text-align: center;">Incident Reports for Your Location</h2>
    <div class="incidents-section">
        <% if (allIncidents.length > 0) { %>
            <% allIncidents.forEach(incident => { %>
                <div class="incident-card shadow-sm">
                    <h3>Incident: <%= incident.incident_type %></h3>
                    <p>Location: <%= incident.location %></p>
                    <p>Reported by: <%= incident.name %> </p>

                    <p><a href="mailto: <%= incident.email %>"><%= incident.email %></a> ( <a href="tel: <%= incident.phone %>"><%= incident.phone %></a>)</p>

                    <p>Time: <%= incident.formatted_time %></p>
                    <p>Date: <%= incident.formatted_date %></p>
                    <% if (incident.imageSrcs && incident.imageSrcs.length > 0) { %>
                        <div class="incident-images">
                            <% incident.imageSrcs.forEach(src => { %>
                                <img src="<%= src %>" alt="Incident Image">
                            <% }) %>
                        </div>
                    <% } %>
                </div>
            <% }) %>
        <% } else { %>
            <p>No incidents reported for your location.</p>
        <% } %>
    </div>
</div>


<script>
    
</script>


<script src="/js/script.js"></script>
<%- include('layouts/footer')%>


